<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home - &#x4E2D;&#x6587;&#x6587;&#x6863;</title>


    <link rel="icon" href="favicon.ico?v=2">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bootstrap/3.3.6/css/bootstrap.min.css">

    <link rel="stylesheet" href="styles/prettify-tomorrow.css">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700">
    <link rel="stylesheet" href="styles/jsdoc-default.css">

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/ionicons/2.0.1/css/ionicons.min.css">
</head>
<body>

<div class="navbar navbar-default navbar-fixed-top">
  <div class="navbar-header">
    <a class="navbar-brand" href="../">
        <img src="img/async-logo.svg" alt="Async.js">
    </a>
  </div>
  <ul class="nav navbar-nav">
    <li id="version-dropdown" class="dropdown">
      <a href="#" class="dropdown-toggle vertically-centered" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">v3.2.0 <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
        <li><a href="../v3/">v3.0.x</a></li>
        <li><a href="../v2/">v2.6.2</a></li>
        <li>
          <a href="https://github.com/caolan/async/blob/v1.5.2/README.md">v1.5.x</a>
        </li>
      </ul>
    </li>
    <li><a href="./index.html">&#x9996;&#x9875;</a></li>
    <li><a href="./docs.html">&#x6587;&#x6863;</a></li>
    <li><a href="https://github.com/caolan/async/blob/master/CHANGELOG.md">Changelog</a></li>
    <li><a href="https://github.com/caolan/async"><i class="ion-social-github" aria-hidden="true"></i></a></li>
  </ul>
  <ul class="nav navbar-nav navbar-right">
    <form class="navbar-form navbar-left" role="search">
      <div class="form-group">
        <input type="text" class="form-control typeahead" id="doc-search" placeholder="Search" autofocus>
      </div>
    </form>
  </ul>
</div>


<input type="checkbox" id="nav-trigger" class="nav-trigger">
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<div id="main">
    <div id="main-container" data-spy="scroll" data-target="#toc" data-offset="50">
        

        



    









    


    <section class="readme">
        <article><p><img src="https://raw.githubusercontent.com/caolan/async/master/logo/async-logo_readme.jpg" alt="Async Logo"></p>
<p><a href="https://travis-ci.org/caolan/async"><img src="https://travis-ci.org/caolan/async.svg?branch=master" alt="Build Status via Travis CI"></a>
<a href="https://www.npmjs.com/package/async"><img src="https://img.shields.io/npm/v/async.svg" alt="NPM version"></a>
<a href="https://coveralls.io/r/caolan/async?branch=master"><img src="https://coveralls.io/repos/caolan/async/badge.svg?branch=master" alt="Coverage Status"></a>
<a href="https://gitter.im/caolan/async?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/caolan/async"></a></p>
<p><em>Async v1.5.x &#x82F1;&#x6587;&#x6587;&#x6863;&#xFF0C; <a href="https://github.com/caolan/async/blob/v1.5.2/README.md">&#x70B9;&#x51FB;&#x6B64;&#x5904;</a></em></p>
<p>Async &#x662F;&#x4E00;&#x4E2A;&#x76F4;&#x622A;&#x4E86;&#x5F53;&#x3001;&#x5F3A;&#x5927;&#x7684;<a href="http://caolan.github.io/async/v3/global.html">&#x5F02;&#x6B65; JavaScript</a> &#x5B9E;&#x7528;&#x5DE5;&#x5177;&#x6A21;&#x5757;&#x3002;
&#x5C3D;&#x7BA1;&#x6700;&#x521D;&#x662F;&#x8BBE;&#x8BA1;&#x7528;&#x4E8E; <a href="https://nodejs.org/">Node.js</a>&#xFF0C;&#x53EF;&#x901A;&#x8FC7; <code>npm i async</code> &#x5B89;&#x88C5;&#xFF0C;&#x4F46;&#x5B83;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;&#x4E8E;&#x6D4F;&#x89C8;&#x5668;&#x3002;</p>
<p>Async &#x4E5F;&#x53EF;&#x4EE5;&#x8FD9;&#x6837;&#x5B89;&#x88C5;&#xFF1A;</p>
<ul>
<li><a href="https://yarnpkg.com/en/">yarn</a>: <code>yarn add async</code></li>
</ul>
<p>Async &#x63D0;&#x4F9B;&#x4E86;&#x7EA6; 70 &#x79CD;&#x51FD;&#x6570;&#xFF0C;&#x5305;&#x62EC;&#x5E38;&#x89C1;&#x7684;&#x6CDB;&#x51FD;&#xFF08;<code>map</code>&#x3001;<code>reduce</code>&#x3001;<code>filter</code>&#x3001;<code>each</code>&#x2026;&#xFF09;&#xFF0C;
&#x540C;&#x65F6;&#x4E5F;&#x63D0;&#x4F9B;&#x4E86;&#x51E0;&#x79CD;&#x5E38;&#x89C1;&#x7684;&#x5F02;&#x6B65;&#x6D41;&#x63A7;&#x5236;&#x6A21;&#x5F0F; &#xFF08;<code>parallel</code>&#x3001;<code>series</code>&#x3001;<code>waterfall</code>&#x7B49;&#xFF09;&#x3002;</p>
<p>&#x6240;&#x6709;&#x4EE5;&#x4E0A;&#x51FD;&#x6570;&#x90FD;&#x5047;&#x8BBE;&#x4F60;&#x4F1A;&#x9075;&#x5FAA; Node.js &#x56DE;&#x8C03;&#x51FD;&#x6570;&#x9ED8;&#x8BA4;&#x7EA6;&#x5B9A;&#xFF1A;
&#x63D0;&#x4F9B;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E3A;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#xFF1B;
&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x5FC5;&#x987B;&#x662F;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#xFF08;Error&#xFF09;&#xFF1B;
&#x6BCF;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x53EA;&#x8C03;&#x7528;&#x4E00;&#x6B21;&#x3002;</p>
<p>&#x540C;&#x65F6;&#x4E5F;&#x53EF;&#x4EE5;&#x4F20;&#x5165; <code>async</code> &#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;&#x5173;&#x4E8E;&#x6B64;&#x4FE1;&#x606F;&#xFF0C;&#x66F4;&#x591A;&#x53EF;&#x53C2;&#x89C1; <a href="global.html#AsyncFunction">AsyncFunction</a></p>
<h2>&#x5FEB;&#x901F;&#x793A;&#x4F8B;</h2>
<pre class="prettyprint source lang-js"><code>async.map([&apos;file1&apos;,&apos;file2&apos;,&apos;file3&apos;], fs.stat, function(err, results) {
    // &#x73B0;&#x5728; results &#x662F;&#x5305;&#x542B;&#x6BCF;&#x4E2A;&#x6587;&#x4EF6;&#x72B6;&#x6001;&#x7684;&#x6570;&#x7EC4;
});

async.filter([&apos;file1&apos;,&apos;file2&apos;,&apos;file3&apos;], function(filePath, callback) {
  fs.access(filePath, function(err) {
    callback(null, !err)
  });
}, function(err, results) {
    // &#x73B0;&#x5728; results &#x7B49;&#x4E8E;&#x5305;&#x542B;&#x5B58;&#x5728;&#x6587;&#x4EF6;&#x7684;&#x6570;&#x7EC4;
});

async.parallel([
    function(callback) { ... },
    function(callback) { ... }
], function(err, results) {
    // &#x53EF;&#x9009;&#x7684; callback
});

async.series([
    function(callback) { ... },
    function(callback) { ... }
]);
</code></pre>
<p>&#x6B64;&#x5916;&#x8FD8;&#x6709;&#x5F88;&#x591A;&#x53EF;&#x7528;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x5B8C;&#x6574;&#x5217;&#x8868;&#x8BF7;&#x770B;&#x6587;&#x6863;&#x3002;&#x6B64;&#x6A21;&#x5757;&#x81F4;&#x529B;&#x4E8E;&#x9002;&#x7528;&#x5E7F;&#x6CDB;&#x573A;&#x666F;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x89C9;&#x5F97;&#x6709;&#x7F3A;&#x5931;&#xFF0C;&#x8BF7;&#x521B;&#x5EFA; Github issue&#x3002;</p>
<h2>&#x5E38;&#x89C1;&#x7684;&#x5751; <a href="http://stackoverflow.com/questions/tagged/async.js">(Stack&#x6EA2;&#x51FA;)</a></h2>
<h3>&#x540C;&#x6B65;&#x7684;&#x8FED;&#x4EE3;&#x51FD;&#x6570;</h3>
<p>&#x4F7F;&#x7528; async &#x65F6;&#x5982;&#x679C;&#x9047;&#x5230;&#x7C7B;&#x4F3C;  <code>RangeError: Maximum call stack size exceeded.</code> &#x7684;&#x9519;&#x8BEF;&#xFF0C;&#x6216;&#x5176;&#x4ED6; stack &#x6EA2;&#x51FA;&#x9519;&#x8BEF;&#xFF0C;&#x5F88;&#x53EF;&#x80FD;&#x662F;&#x56E0;&#x4E3A;&#x4F60;&#x4F7F;&#x7528;&#x4E86;&#x540C;&#x6B65;&#x7684;&#x8FED;&#x4EE3;&#x51FD;&#x6570;&#x3002;
<em>&#x540C;&#x6B65;</em> &#x7684;&#x542B;&#x4E49;&#x662F;&#xFF1A;&#x51FD;&#x6570;&#x5728;&#x540C;&#x4E00;&#x6B21; javascript &#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x91CC;&#xFF08;same tick&#xFF09;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x4E14;&#x6CA1;&#x6709; I/O &#x64CD;&#x4F5C;&#x3001;&#x5B9A;&#x65F6;&#x5668;&#x7684;&#x4F7F;&#x7528;&#x3002;
&#x53CD;&#x590D;&#x8C03;&#x7528;&#x5927;&#x91CF;&#x8FD9;&#x7C7B;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5C06;&#x5FEB;&#x901F;&#x5BFC;&#x81F4; stack &#x6EA2;&#x51FA;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x4F60;&#x9047;&#x5230;&#x6B64;&#x95EE;&#x9898;&#xFF0C;&#x53EA;&#x9700;&#x4F7F;&#x7528; <code>async.setImmediate</code> &#x5EF6;&#x540E;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5728;&#x4E0B;&#x4E00;&#x6B21;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x91CC;&#x5F00;&#x59CB;&#x65B0;&#x7684;&#x8C03;&#x7528;&#x6808;&#x3002;
&#x5982;&#x679C;&#x5728;&#x67D0;&#x4E9B;&#x4F8B;&#x5B50;&#x4E2D;&#x8FC7;&#x65E9;&#x56DE;&#x8C03;&#xFF0C;&#x4E5F;&#x4F1A;&#x9047;&#x5230;&#x8FD9;&#x4E9B;&#x610F;&#x5916;&#xFF1A;</p>
<pre class="prettyprint source lang-js"><code>async.eachSeries(hugeArray, function iteratee(item, callback) {
    if (inCache(item)) {
        callback(null, cache[item]); // &#x5982;&#x679C;&#x7F13;&#x5B58;&#x4E86;&#x592A;&#x591A; item&#xFF0C;&#x5C06;&#x9047;&#x5230;&#x6EA2;&#x51FA;&#xFF08;overflow&#xFF09;
    } else {
        doSomeIO(item, callback);
    }
}, function done() {
    //...
});
</code></pre>
<p>&#x53EF;&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;</p>
<pre class="prettyprint source lang-js"><code>async.eachSeries(hugeArray, function iteratee(item, callback) {
    if (inCache(item)) {
        async.setImmediate(function() {
            callback(null, cache[item]);
        });
    } else {
        doSomeIO(item, callback);
        //...
    }
});
</code></pre>
<p>&#x7531;&#x4E8E;&#x6027;&#x80FD;&#x539F;&#x56E0;&#x7684;&#x8003;&#x8651;&#xFF0C;Async &#x4E0D;&#x4F1A;&#x53BB;&#x68C0;&#x6D4B;&#x963B;&#x6B62;&#x540C;&#x6B65;&#x7684;&#x8FED;&#x4EE3;&#x5668;&#x3002;
&#x5982;&#x679C;&#x8FD8;&#x8DD1;&#x51FA; stack &#x6EA2;&#x51FA;&#xFF0C;&#x53EF;&#x4EE5;&#x6309;&#x63A8;&#x8350;&#x7684;&#x65B9;&#x5F0F;&#x5EF6;&#x540E;&#xFF0C;&#x6216;&#x7528; <a href="#ensureAsync"><code>async.ensureAsync</code></a> &#x5305;&#x542B;&#x540C;&#x6B65;&#x51FD;&#x6570;&#xFF0C;&#x4F7F;&#x5B83;&#x4E0D;&#x5B58;&#x5728;&#x8FD9;&#x6837;&#x7684;&#x95EE;&#x9898;&#xFF0C;&#x5E76;&#x4E14;&#x4E0D;&#x9700;&#x8981;&#x989D;&#x5916;&#x5EF6;&#x540E; callback&#x3002;</p>
<p>&#x5982;&#x679C;&#x5BF9; JavaScript &#x7684;&#x4E8B;&#x4EF6;&#x5FAA;&#x73AF;&#x6982;&#x5FF5;&#x6BD4;&#x8F83;&#x6A21;&#x7CCA;&#xFF0C;&#x9605;&#x8BFB;<a href="http://blog.carbonfive.com/2013/10/27/the-javascript-event-loop-explained/">&#x6B64;&#x6587;&#x7AE0;</a>&#x6216;<a href="http://2014.jsconf.eu/speakers/philip-roberts-what-the-heck-is-the-event-loop-anyway.html">&#x6B64;&#x8BA8;&#x8BBA;</a>&#x67E5;&#x770B;&#x8FD0;&#x4F5C;&#x539F;&#x7406;&#x3002;</p>
<h3>&#x591A;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF08;callback&#xFF09;</h3>
<p>&#x5982;&#x679C;&#x63D0;&#x524D;&#x8C03;&#x7528;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x8BF7;&#x786E;&#x4FDD;&#x53CA;&#x65F6; <code>return</code>&#xFF0C;&#x5426;&#x5219;&#x53EF;&#x80FD;&#x4F1A;&#x591A;&#x6B21;&#x8C03;&#x7528; callback&#xFF0C;&#x540E;&#x679C;&#x65E0;&#x6CD5;&#x9884;&#x6599;&#x3002;</p>
<pre class="prettyprint source lang-js"><code>async.waterfall([
    function(callback) {
        getSomething(options, function (err, result) {
            if (err) {
                callback(new Error(&quot;failed getting something:&quot; + err.message));
                // &#x5E94;&#x8BE5;&#x5728;&#x8FD9;&#x91CC; return
            }
            // &#x7531;&#x4E8E;&#x6CA1;&#x6709; return&#xFF0C;&#x8FD8;&#x662F;&#x8C03;&#x7528;&#x4E86;&#x4E0B;&#x9762;&#x7684; callback
            // `processData` &#x5C06;&#x4F1A;&#x8C03;&#x7528;&#x4E24;&#x6B21;
            callback(null, result);
        });
    },
    processData
], done)
</code></pre>
<p>&#x5982;&#x679C;&#x8C03;&#x7528; callback&#x4E0D;&#x662F;&#x51FD;&#x6570;&#x7684;&#x6700;&#x540E;&#x4E00;&#x4E2A;&#x8BED;&#x53E5;&#xFF0C;&#x6700;&#x4F73;&#x5B9E;&#x8DF5;&#x662F; <code>return callback(err, result)</code>&#x3002;</p>
<h3>&#x4F7F;&#x7528; ES2017 <code>async</code> &#x51FD;&#x6570;</h3>
<p>&#x53EA;&#x8981; Async &#x5E93;&#x91CC;&#x80FD;&#x63A5;&#x53D7; Node &#x98CE;&#x683C; callback &#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x63A5;&#x53D7; <code>async</code> &#x51FD;&#x6570;&#x3002;
&#x53EA;&#x4E0D;&#x8FC7;&#xFF0C;&#x4E0D;&#x628A;&#x5B83;&#x4EEC;&#x4F5C;&#x4E3A;&#x56DE;&#x8C03;&#x4F20;&#x5165;&#xFF0C;&#x800C;&#x662F;&#x4EE5;&#x503C;&#x8FD4;&#x56DE;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x5904;&#x7406; Promise.reject &#x6216;&#x629B;&#x51FA;&#x9519;&#x8BEF;&#x3002;</p>
<pre class="prettyprint source lang-js"><code>async.mapLimit(files, 10, async file =&gt; { // &lt;- &#x6CA1;&#x6709; callback&#xFF01;
    const text = await util.promisify(fs.readFile)(dir + file, &apos;utf8&apos;)
    const body = JSON.parse(text) // &lt;- &#x81EA;&#x52A8;&#x4EA7;&#x751F; parse &#x9519;&#x8BEF;
    if (!(await checkValidity(body))) {
        throw new Error(`${file} has invalid contents`) // &lt;- &#x6B64;&#x9519;&#x8BEF;&#x4F1A;&#x88AB;&#x6355;&#x6349;
    }
    return body // &lt;- &#x8FD4;&#x56DE; value!
}, (err, contents) =&gt; {
    if (err) throw err
    console.log(contents)
})
</code></pre>
<p>&#x6211;&#x4EEC;&#x4EC5;&#x652F;&#x6301;&#x539F;&#x751F;&#xFF08;native&#xFF09;<code>async</code> &#x51FD;&#x6570;&#xFF0C;&#x4E0D;&#x652F;&#x6301;&#x7F16;&#x8BD1;&#x540E;&#x7684;&#x7248;&#x672C;&#xFF08;&#x4F8B;&#x5982; Babel &#x7F16;&#x8BD1;&#xFF09;&#x3002;&#x4E0D;&#x7136;&#x7684;&#x8BDD;&#xFF0C;&#x53EA;&#x80FD;&#x4F7F;&#x7528; <code>async.asyncify()</code> &#x5305;&#x4E0B; <code>async</code> &#x51FD;&#x6570;&#x3002;</p>
<h3>&#x4E3A;&#x8FED;&#x4EE3;&#x5668;&#x7ED1;&#x5B9A;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;context&#xFF09;</h3>
<p>&#x672C;&#x7AE0;&#x8282;&#x4E0D;&#x8BA8;&#x8BBA; Async&#xFF0C;&#x800C;&#x771F;&#x7684;&#x662F;&#x7ED1;&#x5B9A;&#xFF08;<code>bind</code>&#xFF09;&#x3002;
&#x82E5;&#x8981; Async &#x4EE5;&#x6307;&#x5B9A;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;context&#xFF09;&#x6267;&#x884C;&#x8FED;&#x4EE3;&#xFF0C;
&#x6216;&#x8005;&#x56E0;&#x4E3A;&#x5176;&#x4ED6;&#x65B9;&#x6CD5;&#x3001;&#x5176;&#x4ED6;&#x5E93;&#x4E0D;&#x80FD;&#x4F5C;&#x4E3A;&#x8FED;&#x4EE3;&#x8FD0;&#x884C;&#x800C;&#x611F;&#x5230;&#x7591;&#x60D1;&#xFF0C;&#x53EF;&#x4EE5;&#x5B66;&#x4E60;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#xFF1A;</p>
<pre class="prettyprint source lang-js"><code>// &#x8FD9;&#x662F;&#x4E2A;&#x5E26;&#x6709;&#x591A;&#x4F59;&#x53C8;&#x4E0D;&#x591F;&#x76F4;&#x63A5;&#x7684; square &#x65B9;&#x6CD5;&#x7684;&#x7B80;&#x5355; Object
var AsyncSquaringLibrary = {
    squareExponent: 2,
    square: function(number, callback){
        var result = Math.pow(number, this.squareExponent);
        setTimeout(function(){
            callback(null, result);
        }, 200);
    }
};

async.map([1, 2, 3], AsyncSquaringLibrary.square, function(err, result) {
    // result &#x662F; [NaN, NaN, NaN]
    // &#x5931;&#x8D25;&#x7684;&#x539F;&#x56E0;&#x662F;&#xFF1A;&#x5728; square &#x65B9;&#x6CD5;&#x91CC;&#xFF0C;`this.squareExponent` &#x8868;&#x8FBE;&#x5F0F;
    // &#x5173;&#x8054;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#xFF08;Context&#xFF09;&#x4E0D;&#x662F; AsyncSquaringLibrary&#xFF0C;&#x800C;&#x662F; undefined
});

async.map([1, 2, 3], AsyncSquaringLibrary.square.bind(AsyncSquaringLibrary), function(err, result) {
    // result &#x662F; [1, 4, 9]
    // &#x7531;&#x4E8E; bind &#x7684;&#x4F5C;&#x7528;&#xFF0C;&#x628A;&#x8FED;&#x4EE3;&#x5668;&#x4F20;&#x7ED9; Async &#x524D;&#x9644;&#x52A0;&#x4E86; Context&#x3002;
    // &#x73B0;&#x5728; square &#x51FD;&#x6570;&#x4F1A;&#x4EE5;&#x5B83;&#x81EA;&#x8EAB;&#x7684; AsyncSquaringLibrary &#x4E0A;&#x4E0B;&#x6587;&#x6267;&#x884C;
    // &#x56E0;&#x6B64;&#x4F1A;&#x5F97;&#x5230;&#x6B63;&#x786E;&#x7684; `this.squareExponent`
});
</code></pre>
<h3>&#x96BE;&#x4EE5;&#x5BDF;&#x89C9;&#x7684;&#x5185;&#x5B58;&#x6CC4;&#x6F0F;</h3>
<p>&#x6709;&#x65F6;&#x5728;&#x53E6;&#x4E00;&#x4E2A;&#x5F02;&#x6B65;&#x51FD;&#x6570;&#x91CC;&#x8C03;&#x7528; Async &#x65B9;&#x6CD5;&#x65F6;&#x8981;&#x63D0;&#x524D;&#x9000;&#x51FA; async &#x6D41;&#xFF1A;</p>
<pre class="prettyprint source lang-javascript"><code>function myFunction (args, outerCallback) {
    async.waterfall([
        //...
        function (arg, next) {
            if (someImportantCondition()) {
                return outerCallback(null)
            }
        },
        function (arg, next) {/*...*/}
    ], function done (err) {
        //...
    })
}
</code></pre>
<p>&#x7011;&#x5E03;&#x6D41;&#xFF08;waterfall&#xFF09;&#x91CC;&#x53D1;&#x751F;&#x4EC0;&#x4E48;&#x4E8B;&#xFF0C;&#x9700;&#x8981;&#x8DF3;&#x51FA;&#x7011;&#x5E03;&#x6D41;&#xFF0C;&#x8DF3;&#x8FC7;&#x5269;&#x4F59;&#x7684;&#x6267;&#x884C;&#x65F6;&#xFF0C;&#x8C03;&#x7528;&#x4E86;&#x4E00;&#x4E2A;&#x5916;&#x90E8;&#xFF08;outer&#xFF09;callback&#x3002;
&#x4F46;&#x662F;&#xFF0C;&#x8FD8;&#x662F;&#x4F1A;&#x7B49;&#x5F85;&#x5185;&#x90E8; <code>next</code> callback &#x8C03;&#x7528;&#xFF0C;&#x7559;&#x4E0B;&#x5206;&#x914D;&#x7684;&#x95ED;&#x5305;&#x4F5C;&#x7528;&#x57DF;&#x3002;</p>
<p>&#x4ECE;&#x7248;&#x672C; 3.0 &#x5F00;&#x59CB;&#xFF0C;&#x53EF;&#x4EE5;&#x4F20;&#x5165; <code>false</code> &#x5230; <code>error</code> &#x53C2;&#x6570;&#xFF0C;&#x963B;&#x6B62; Async &#x8C03;&#x7528;&#x5176;&#x4ED6; callback&#x3002;</p>
<pre class="prettyprint source lang-javascript"><code>        function (arg, next) {
            if (someImportantCondition()) {
                outerCallback(null)
                return next(false) // &#x2190; &#x6807;&#x793A;&#x8C03;&#x7528;&#x4E86;&#x5916;&#x5C42; callback
            }
        },
</code></pre>
<h3>&#x5904;&#x7406;&#x96C6;&#x5408;&#x65F6;&#x7684;&#x540C;&#x65F6;&#x4FEE;&#x6539;&#x96C6;&#x5408;</h3>
<p>&#x4F20;&#x5165; array &#x5230;&#x96C6;&#x5408;&#x65B9;&#x6CD5;&#xFF08;&#x4F8B;&#x5982; <code>each</code>&#x3001;<code>mapLimit</code>&#x3001;<code>filterSeries</code>&#xFF09;&#xFF0C;&#x5E76;&#x4E14;&#x5C1D;&#x8BD5; <code>push</code>&#x3001;<code>pop</code> &#x6216; <code>splice</code> &#x989D;&#x5916;&#x9879;&#x76EE;&#x5230; array &#x65F6;&#xFF0C;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x610F;&#x5916;&#x3002;
Async &#x4F1A;&#x8FED;&#x4EE3;&#x76F4;&#x81F3;&#x9047;&#x5230; array &#x7684;&#x539F;&#x59CB; <code>length</code>&#xFF0C;<code>pop()</code> &#x6216; <code>splice()</code> &#x7684;&#x9879;&#x76EE;&#x53EF;&#x80FD;&#x5DF2;&#x5904;&#x7406;&#x3002;
&#x56E0;&#x6B64;&#x4E0D;&#x63A8;&#x8350;&#x4FEE;&#x6539; Async &#x5DF2;&#x7ECF;&#x8FED;&#x4EE3;&#x8FC7;&#x7684; array&#x3002;
&#x82E5;&#x9700;&#x8981; <code>push</code>&#x3001;<code>pop</code>&#x3001;<code>splice</code>&#xFF0C;&#x4F7F;&#x7528; <code>queue</code> &#x66FF;&#x4EE3;&#x3002;</p>
<h2>&#x4E0B;&#x8F7D;</h2>
<p>&#x6E90;&#x7801;&#x53EF;&#x4EE5;&#x4ECE;
<a href="https://raw.githubusercontent.com/caolan/async/master/dist/async.min.js">GitHub</a> &#x4E0B;&#x8F7D;&#x3002;
&#x9664;&#x6B64;&#x4E4B;&#x5916;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; npm &#x5B89;&#x88C5;&#xFF1A;</p>
<pre class="prettyprint source lang-bash"><code>$ npm i async
</code></pre>
<p>&#x53EF;&#x4EE5;&#x548C;&#x5E73;&#x65F6;&#x4E00;&#x6837; <code>require()</code> async:</p>
<pre class="prettyprint source lang-js"><code>var async = require(&quot;async&quot;);
</code></pre>
<p>&#x4E5F;&#x53EF;&#x4EE5; require &#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<pre class="prettyprint source lang-js"><code>var waterfall = require(&quot;async/waterfall&quot;);
var map = require(&quot;async/map&quot;);
</code></pre>
<p><strong>&#x5F00;&#x53D1;&#x7528;&#xFF1A;</strong> <a href="https://raw.githubusercontent.com/caolan/async/master/dist/async.js">async.js</a> - 29.6kb &#x672A;&#x538B;&#x7F29;</p>
<h3>&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E2D;&#x4F7F;&#x7528;</h3>
<p>Async &#x53EF;&#x4EE5;&#x5728;&#x4EFB;&#x4F55; ES2015 &#x73AF;&#x5883;&#x4E2D;&#x8FD0;&#x884C;&#xFF08;Node 6+ &#x548C;&#x6240;&#x6709;&#x73B0;&#x4EE3;&#x6D4F;&#x89C8;&#x5668;&#xFF09;&#x3002;</p>
<p>&#x60F3;&#x8981;&#x5728;&#x65E7;&#x73AF;&#x5883;&#x4E2D;&#x4F7F;&#x7528; Async&#xFF0C;(&#x6BD4;&#x5982; Node 4&#x3001;IE11) &#x5FC5;&#x987B;&#x5148;&#x8F6C;&#x7801;&#x3002;</p>
<p>&#x7528;&#x6CD5;&#xFF1A;</p>
<pre class="prettyprint source lang-html"><code>&lt;script type=&quot;text/javascript&quot; src=&quot;async.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot;&gt;

    async.map(data, asyncProcess, function(err, results) {
        alert(results);
    });

&lt;/script&gt;
</code></pre>
<p>&#x5728; <code>/dist</code> &#x4E2D;&#x5305;&#x62EC; <code>async.js</code> &#x548C; <code>async.min.js</code> &#x4E3A;&#x65E0;&#x9700;&#x5B89;&#x88C5;&#x7684; Async &#x7248;&#x672C;&#x3002;
&#x4E5F;&#x80FD;&#x5728; <a href="http://www.jsdelivr.com/projects/async">jsDelivr CDN</a> &#x4E2D;&#x627E;&#x5230; Async&#x3002;</p>
<h3>ES &#x6A21;&#x5757;</h3>
<p>Async &#x5305;&#x542B;&#x4E86; <code>.mjs</code> &#x7248;&#x672C;&#xFF0C;&#x53EF;&#x81EA;&#x52A8;&#x7528;&#x4E8E;&#x517C;&#x5BB9;&#x7684;&#x6253;&#x5305;&#x5DE5;&#x5177;&#xFF0C;&#x7C7B;&#x4F3C; Webpack&#x3001;Rollup&#xFF0C;&#x7528;&#x4E8E; <code>package.json</code> &#x4E2D;&#x7684; <code>module</code> &#x5B57;&#x6BB5;&#x3002;
&#x6211;&#x4EEC;&#x4E5F;&#x5728; <code>async-es</code> npm &#x5305;&#x4E2D;&#x63D0;&#x4F9B;&#x4E86;&#x7EAF; ES2015 &#x6A21;&#x5757;&#x7684; Async&#x3002;</p>
<pre class="prettyprint source lang-bash"><code>$ npm install async-es
</code></pre>
<pre class="prettyprint source lang-js"><code>import waterfall from &apos;async-es/waterfall&apos;;
import async from &apos;async-es&apos;;
</code></pre>
<h3>Typescript</h3>
<p>Async &#x4E5F;&#x6709;&#x7B2C;&#x4E09;&#x65B9;&#x7684;&#x7C7B;&#x578B;&#x5B9A;&#x4E49;&#x3002;</p>
<pre class="prettyprint source"><code>npm i -D @types/async
</code></pre>
<p>&#x4E3A;&#x4E86;&#x4FDD;&#x7559; <code>async</code> &#x51FD;&#x6570;&#xFF0C;&#x65E0;&#x9700;&#x8F6C;&#x7801;&#xFF0C;&#x5EFA;&#x8BAE; <code>tsconfig.json</code> &#x91CC; target &#x4E3A; ES2017 &#x6216;&#x66F4;&#x9AD8;&#x7248;&#x672C;&#xFF1A;</p>
<pre class="prettyprint source lang-json"><code>{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;es2017&quot;
  }
}
</code></pre>
<h2>&#x5176;&#x4ED6;&#x5E93;</h2>
<ul>
<li><a href="https://www.npmjs.com/package/limiter"><code>limiter</code></a> &#x9891;&#x7387;&#x9650;&#x5236;&#x5305;&#xFF0C;&#x57FA;&#x4E8E;&#x6BCF;&#x79D2;/&#x5C0F;&#x65F6;&#x7684;&#x8BF7;&#x6C42;&#x6570;&#x3002;</li>
<li><a href="https://www.npmjs.com/package/neo-async"><code>neo-async</code></a> Async &#x66FF;&#x4EE3;&#x54C1;&#xFF0C;&#x4E13;&#x6CE8;&#x4E8E;&#x901F;&#x5EA6;&#x3002;</li>
<li><a href="https://www.npmjs.com/package/co-async"><code>co-async</code></a> &#x53D7; Async &#x542F;&#x53D1;&#x7684;&#x5E93;&#xFF0C;&#x914D;&#x5408; <a href="https://www.npmjs.com/package/co"><code>co</code></a> &#x548C; generator &#x51FD;&#x6570;&#x4F7F;&#x7528;&#x3002;</li>
<li><a href="https://www.npmjs.com/package/promise-async"><code>promise-async</code></a> &#x6240;&#x6709;&#x51FD;&#x6570;&#x90FD; Promise &#x5316;&#x7684; Async &#x7248;&#x672C;&#x3002;</li>
</ul>
<h2>&#x5173;&#x4E8E;&#x7FFB;&#x8BD1;</h2>
<p>&#x672C;&#x6587;&#x6863;&#x57FA;&#x4E8E; caolan/async master &#x5206;&#x652F;&#x8FDB;&#x884C;&#x7FFB;&#x8BD1;&#xFF0C;&#x8D77;&#x56E0;&#x4E3A;&#x6B64;&#x5E93;&#x5728;&#x514B;&#x52E4;&#x56E2;&#x961F;&#x4E2D;&#x5927;&#x91CF;&#x7528;&#x4E8E;&#x540E;&#x7AEF;&#x961F;&#x5217;&#x7684;&#x5904;&#x7406;&#x3002; &#x5E7F;&#x544A;&#x65F6;&#x95F4;&#xFF1A;&#x62DB;&#x8058;&#x524D;&#x7AEF;&#x5F00;&#x53D1;&#x5DE5;&#x7A0B;&#x5E08;&#xFF0C;&#x60F3;&#x8981;&#x52A0;&#x5165;&#x6211;&#x4EEC;&#x8BF7;&#x90AE;&#x4EF6;&#x8054;&#x7CFB;&#x3002;</p>
<p>&#x4E2D;&#x6587;&#x7FFB;&#x8BD1;&#x6587;&#x6863; Github &#x5730;&#x5740; <a href="https://github.com/shiny/async">https://github.com/shiny/async </a> &#x6B22;&#x8FCE;&#x8D21;&#x732E; issue/pull request&#x3002;</p>
<ul>
<li>&#x6234;&#x52BC; <a href="mailto:daijie@php.net">daijie@php.net</a></li>
</ul></article>
    </section>






    <footer>
    &#x6587;&#x6863;&#x7531; <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.2</a> &#x751F;&#x6210;&#xFF0C;&#x4E3B;&#x9898; Minami&#x3002;
</footer></div>
</div>

<nav id="toc">
    <h3>Methods:</h3><ul class="nav methods"><li class="toc-header"><a href="docs.html#&#x96C6;&#x5408;&#xFF08;collections&#xFF09;">&#x96C6;&#x5408;&#xFF08;Collections&#xFF09;</a></li><li data-type="method" class="toc-method"><a href="docs.html#concat">concat</a></li><li data-type="method" class="toc-method"><a href="docs.html#concatLimit">concatLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#concatSeries">concatSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#detect">detect</a></li><li data-type="method" class="toc-method"><a href="docs.html#detectLimit">detectLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#detectSeries">detectSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#each">each</a></li><li data-type="method" class="toc-method"><a href="docs.html#eachLimit">eachLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#eachOf">eachOf</a></li><li data-type="method" class="toc-method"><a href="docs.html#eachOfLimit">eachOfLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#eachOfSeries">eachOfSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#eachSeries">eachSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#every">every</a></li><li data-type="method" class="toc-method"><a href="docs.html#everyLimit">everyLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#everySeries">everySeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#filter">filter</a></li><li data-type="method" class="toc-method"><a href="docs.html#filterLimit">filterLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#filterSeries">filterSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#groupBy">groupBy</a></li><li data-type="method" class="toc-method"><a href="docs.html#groupByLimit">groupByLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#groupBySeries">groupBySeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#map">map</a></li><li data-type="method" class="toc-method"><a href="docs.html#mapLimit">mapLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#mapSeries">mapSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#mapValues">mapValues</a></li><li data-type="method" class="toc-method"><a href="docs.html#mapValuesLimit">mapValuesLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#mapValuesSeries">mapValuesSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#reduce">reduce</a></li><li data-type="method" class="toc-method"><a href="docs.html#reduceRight">reduceRight</a></li><li data-type="method" class="toc-method"><a href="docs.html#reject">reject</a></li><li data-type="method" class="toc-method"><a href="docs.html#rejectLimit">rejectLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#rejectSeries">rejectSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#some">some</a></li><li data-type="method" class="toc-method"><a href="docs.html#someLimit">someLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#someSeries">someSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#sortBy">sortBy</a></li><li data-type="method" class="toc-method"><a href="docs.html#transform">transform</a></li><li class="toc-header"><a href="docs.html#&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#xFF08;controlflow&#xFF09;">&#x6D41;&#x7A0B;&#x63A7;&#x5236;&#xFF08;Control Flow&#xFF09;</a></li><li data-type="method" class="toc-method"><a href="docs.html#applyEach">applyEach</a></li><li data-type="method" class="toc-method"><a href="docs.html#applyEachSeries">applyEachSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#auto">auto</a></li><li data-type="method" class="toc-method"><a href="docs.html#autoInject">autoInject</a></li><li data-type="method" class="toc-method"><a href="docs.html#cargo">cargo</a></li><li data-type="method" class="toc-method"><a href="docs.html#cargoQueue">cargoQueue</a></li><li data-type="method" class="toc-method"><a href="docs.html#compose">compose</a></li><li data-type="method" class="toc-method"><a href="docs.html#doUntil">doUntil</a></li><li data-type="method" class="toc-method"><a href="docs.html#doWhilst">doWhilst</a></li><li data-type="method" class="toc-method"><a href="docs.html#forever">forever</a></li><li data-type="method" class="toc-method"><a href="docs.html#parallel">parallel</a></li><li data-type="method" class="toc-method"><a href="docs.html#parallelLimit">parallelLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#priorityQueue">priorityQueue</a></li><li data-type="method" class="toc-method"><a href="docs.html#queue">queue</a></li><li data-type="method" class="toc-method"><a href="docs.html#race">race</a></li><li data-type="method" class="toc-method"><a href="docs.html#retry">retry</a></li><li data-type="method" class="toc-method"><a href="docs.html#retryable">retryable</a></li><li data-type="method" class="toc-method"><a href="docs.html#seq">seq</a></li><li data-type="method" class="toc-method"><a href="docs.html#series">series</a></li><li data-type="method" class="toc-method"><a href="docs.html#times">times</a></li><li data-type="method" class="toc-method"><a href="docs.html#timesLimit">timesLimit</a></li><li data-type="method" class="toc-method"><a href="docs.html#timesSeries">timesSeries</a></li><li data-type="method" class="toc-method"><a href="docs.html#tryEach">tryEach</a></li><li data-type="method" class="toc-method"><a href="docs.html#until">until</a></li><li data-type="method" class="toc-method"><a href="docs.html#waterfall">waterfall</a></li><li data-type="method" class="toc-method"><a href="docs.html#whilst">whilst</a></li><li class="toc-header"><a href="docs.html#&#x5B9E;&#x7528;&#x5DE5;&#x5177;&#xFF08;utils&#xFF09;">&#x5B9E;&#x7528;&#x5DE5;&#x5177;&#xFF08;Utils&#xFF09;</a></li><li data-type="method" class="toc-method"><a href="docs.html#apply">apply</a></li><li data-type="method" class="toc-method"><a href="docs.html#asyncify">asyncify</a></li><li data-type="method" class="toc-method"><a href="docs.html#constant">constant</a></li><li data-type="method" class="toc-method"><a href="docs.html#dir">dir</a></li><li data-type="method" class="toc-method"><a href="docs.html#ensureAsync">ensureAsync</a></li><li data-type="method" class="toc-method"><a href="docs.html#log">log</a></li><li data-type="method" class="toc-method"><a href="docs.html#memoize">memoize</a></li><li data-type="method" class="toc-method"><a href="docs.html#nextTick">nextTick</a></li><li data-type="method" class="toc-method"><a href="docs.html#reflect">reflect</a></li><li data-type="method" class="toc-method"><a href="docs.html#reflectAll">reflectAll</a></li><li data-type="method" class="toc-method"><a href="docs.html#setImmediate">setImmediate</a></li><li data-type="method" class="toc-method"><a href="docs.html#timeout">timeout</a></li><li data-type="method" class="toc-method"><a href="docs.html#unmemoize">unmemoize</a></li></ul><h3>Methods:</h3>
</nav>

<br class="clear">




<script src="https://cdn.jsdelivr.net/prettify/0.1/prettify.js"></script>

<script src="https://cdn.jsdelivr.net/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/typeahead.js/0.11.1/typeahead.bundle.min.js"></script>
<script>prettyPrint();</script>
<script src="scripts/async.js"></script>

<script src="scripts/linenumber.js" async></script>
<script src="scripts/jsdoc-custom.js" async></script>
</body>